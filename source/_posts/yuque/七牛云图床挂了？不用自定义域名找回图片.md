---
title: 七牛云图床挂了？不用自定义域名找回图片
urlname: vf3nzs
date: 2020-06-11 18:07:18 +0800
tags: []
categories: []
---

## 原理

- 新创建的存储空间有 30 天的测试域名，利用这个测试域名可以下载文件。
- 利用七牛云提供的命令行工具，把原空间文件批量拷贝到新空间

## **1. 下载 CLI 工具并绑定账号**

[https://developer.qiniu.com/kodo/tools/1302/qshell](https://developer.qiniu.com/kodo/tools/1302/qshell)
以 window 为例，下载后在当前文件夹执行命令

```bash
./qshell-windows-x64.exe account [AccessKey] [SecretKey]
```

## \*\* \*\*2. 下载原空间文件列表

```bash
./qshell-windows-x64.exe listbucket marvinxu-blog list.txt
```

**注意：下载完后的列表里包含文件类型、大小等其他信息，统统删掉，每行只保留文件名**

## **3. 在七牛云控制台新建空间**

**![image.png](https://cdn.nlark.com/yuque/0/2020/png/1310147/1591870705500-e2df6f7c-445b-4a31-9baf-725d206d4b10.png#align=left&display=inline&height=217&margin=%5Bobject%20Object%5D&name=image.png&originHeight=434&originWidth=1244&size=42893&status=done&style=none&width=622)**
**注意**：新建空间一定要与域名失效空间在一个地区服务器上，否则无法拷贝进文件。

## 4. 批量拷贝文件到新空间

```bash
./qshell-windows-x64.exe batchcopy --force --overwrite marvinxu-blog marvin2006 list.txt
```

##

## 5. 下载文件

```bash
./qshell-windows-x64.exe qdownload download.conf
```

download.conf

```json
{
  "dest_dir": "E:\\qiniu",
  "bucket": "marvin2006",
  "cdn_domain": "qbr9xkevc.bkt.clouddn.com"
}
```

注意路径要双斜杠，否则解析错误
